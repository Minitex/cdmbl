require 'test_helper'
module CDMBL
  describe OAIFilter do
    let(:headers) { ([{"identifier"=>"oai:reflections.mndigital.org:p16022coll44/0", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/1", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/2", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/3", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/4", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/5", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/6", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/7", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/8", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/9", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/10", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/11", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/12", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/13", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/14", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/15", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/16", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/17", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/18", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/19", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/20", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/21", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/22", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/23", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/24", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/25", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/26", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/27", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/28", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/29", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/30", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/31", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/32", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/33", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/34", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/35", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/36", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/37", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/38", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/39", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/40", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/41", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/42", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/43", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/44", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/45", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/46", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/47", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/48", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/49", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/50", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/51", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/52", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/53", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/54", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/55", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/56", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/57", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/58", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/59", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/60", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/61", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/62", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/63", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/64", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/65", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/66", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/67", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/68", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/69", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/70", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/71", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/72", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/73", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/74", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/75", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/76", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/77", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/78", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/79", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/80", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/81", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/82", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/83", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/84", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/85", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/86", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/87", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/88", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/89", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/90", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/91", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/92", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/93", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/96", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/99", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/102", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/105", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/108", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/111", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/114", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/117", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/120", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"identifier"=>"oai:reflections.mndigital.org:p16022coll44/123", "datestamp"=>"2015-09-30", "setSpec"=>"p16022coll44"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/0", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/1", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/2", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/3", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/4", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/5", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/6", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/7", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/8", "datestamp"=>"2014-06-24", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/9", "datestamp"=>"2014-04-07", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/10", "datestamp"=>"2014-04-07", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/11", "datestamp"=>"2014-04-07", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/12", "datestamp"=>"2014-04-07", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/13", "datestamp"=>"2014-04-07", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/14", "datestamp"=>"2014-04-07", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/15", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/16", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/17", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/18", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/19", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/20", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/21", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/22", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/23", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/24", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/25", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/26", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/27", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/28", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/29", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/30", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/31", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/32", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/33", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/34", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/35", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/36", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/37", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/38", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/39", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/40", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/41", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/42", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/43", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/44", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/45", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/46", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/47", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/48", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/49", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/50", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/51", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/52", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/53", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/54", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/55", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/56", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/57", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/58", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/59", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/60", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/61", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/62", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/63", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/64", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/65", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/66", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/67", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/68", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/69", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/70", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/71", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/72", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/73", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/74", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/75", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/76", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/77", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"status"=>"deleted", "identifier"=>"oai:reflections.mndigital.org:swede/78", "datestamp"=>"2012-02-08", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/79", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/80", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/81", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/82", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/83", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/84", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/85", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/86", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/87", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/88", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/89", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/90", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/91", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/92", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/93", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/94", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}, {"identifier"=>"oai:reflections.mndigital.org:swede/95", "datestamp"=>"2014-02-04", "setSpec"=>"swede"}]) }

    it 'returns all non-deleted records' do
      filter = OAIFilter.new(headers: headers)
      filter.updatable_ids.must_equal [["p16022coll44", "0"], ["p16022coll44", "1"], ["p16022coll44", "2"], ["p16022coll44", "3"], ["p16022coll44", "4"], ["p16022coll44", "5"], ["p16022coll44", "6"], ["p16022coll44", "7"], ["p16022coll44", "8"], ["p16022coll44", "9"], ["p16022coll44", "10"], ["p16022coll44", "11"], ["p16022coll44", "12"], ["p16022coll44", "13"], ["p16022coll44", "14"], ["p16022coll44", "15"], ["p16022coll44", "16"], ["p16022coll44", "17"], ["p16022coll44", "18"], ["p16022coll44", "19"], ["p16022coll44", "20"], ["p16022coll44", "21"], ["p16022coll44", "22"], ["p16022coll44", "23"], ["p16022coll44", "24"], ["p16022coll44", "25"], ["p16022coll44", "26"], ["p16022coll44", "27"], ["p16022coll44", "28"], ["p16022coll44", "29"], ["p16022coll44", "30"], ["p16022coll44", "31"], ["p16022coll44", "32"], ["p16022coll44", "33"], ["p16022coll44", "34"], ["p16022coll44", "35"], ["p16022coll44", "36"], ["p16022coll44", "37"], ["p16022coll44", "38"], ["p16022coll44", "39"], ["p16022coll44", "40"], ["p16022coll44", "41"], ["p16022coll44", "42"], ["p16022coll44", "43"], ["p16022coll44", "44"], ["p16022coll44", "45"], ["p16022coll44", "46"], ["p16022coll44", "47"], ["p16022coll44", "48"], ["p16022coll44", "49"], ["p16022coll44", "50"], ["p16022coll44", "51"], ["p16022coll44", "52"], ["p16022coll44", "53"], ["p16022coll44", "54"], ["p16022coll44", "55"], ["p16022coll44", "56"], ["p16022coll44", "57"], ["p16022coll44", "58"], ["p16022coll44", "59"], ["p16022coll44", "60"], ["p16022coll44", "61"], ["p16022coll44", "62"], ["p16022coll44", "63"], ["p16022coll44", "64"], ["p16022coll44", "65"], ["p16022coll44", "66"], ["p16022coll44", "67"], ["p16022coll44", "68"], ["p16022coll44", "69"], ["p16022coll44", "70"], ["p16022coll44", "71"], ["p16022coll44", "72"], ["p16022coll44", "73"], ["p16022coll44", "74"], ["p16022coll44", "75"], ["p16022coll44", "76"], ["p16022coll44", "77"], ["p16022coll44", "78"], ["p16022coll44", "79"], ["p16022coll44", "80"], ["p16022coll44", "81"], ["p16022coll44", "82"], ["p16022coll44", "83"], ["p16022coll44", "84"], ["p16022coll44", "85"], ["p16022coll44", "86"], ["p16022coll44", "87"], ["p16022coll44", "88"], ["p16022coll44", "89"], ["p16022coll44", "90"], ["p16022coll44", "91"], ["p16022coll44", "92"], ["p16022coll44", "93"], ["p16022coll44", "96"], ["p16022coll44", "99"], ["p16022coll44", "102"], ["p16022coll44", "105"], ["p16022coll44", "108"], ["p16022coll44", "111"], ["p16022coll44", "114"], ["p16022coll44", "117"], ["p16022coll44", "120"], ["p16022coll44", "123"], ["swede", "3"], ["swede", "4"], ["swede", "5"], ["swede", "6"], ["swede", "8"], ["swede", "9"], ["swede", "10"], ["swede", "11"], ["swede", "12"], ["swede", "13"], ["swede", "14"], ["swede", "15"], ["swede", "17"], ["swede", "18"], ["swede", "22"], ["swede", "23"], ["swede", "26"], ["swede", "27"], ["swede", "32"], ["swede", "33"], ["swede", "34"], ["swede", "35"], ["swede", "36"], ["swede", "37"], ["swede", "38"], ["swede", "39"], ["swede", "40"], ["swede", "41"], ["swede", "42"], ["swede", "43"], ["swede", "45"], ["swede", "47"], ["swede", "49"], ["swede", "50"], ["swede", "53"], ["swede", "55"], ["swede", "57"], ["swede", "58"], ["swede", "61"], ["swede", "62"], ["swede", "63"], ["swede", "65"], ["swede", "66"], ["swede", "67"], ["swede", "69"], ["swede", "71"], ["swede", "72"], ["swede", "74"], ["swede", "75"], ["swede", "77"], ["swede", "79"], ["swede", "80"], ["swede", "81"], ["swede", "82"], ["swede", "83"], ["swede", "84"], ["swede", "85"], ["swede", "86"], ["swede", "87"], ["swede", "88"], ["swede", "89"], ["swede", "90"], ["swede", "91"], ["swede", "92"], ["swede", "93"], ["swede", "94"], ["swede", "95"]]
      filter.updatable_ids.length.must_equal 171
    end
    it 'returns all deleted records' do
      filter = OAIFilter.new(headers: headers)
      filter.deletable_ids.must_equal ["swede:0", "swede:1", "swede:2", "swede:7", "swede:16", "swede:19", "swede:20", "swede:21", "swede:24", "swede:25", "swede:28", "swede:29", "swede:30", "swede:31", "swede:44", "swede:46", "swede:48", "swede:51", "swede:52", "swede:54", "swede:56", "swede:59", "swede:60", "swede:64", "swede:68", "swede:70", "swede:73", "swede:76", "swede:78"]
      filter.deletable_ids.length.must_equal 29
    end

  end
end